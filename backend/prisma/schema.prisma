generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  createdAt DateTime @default(now())
}

model Profile {
  id               String  @id @default(uuid())
  bio              String  @db.Text
  yearsExperience  Int
  projectsDone     Int
  location         String
  cvUrl            String?
  availableForHi   Boolean @default(true)
}

enum ProjectStatus {
  DRAFT
  PUBLISHED
}

model Project {
  id          String   @id @default(uuid())
  title       String
  slug        String   @unique
  description String   @db.Text
  category    String
  year        Int
  imageUrl    String
  projectUrl  String?
  sortOrder   Int      @default(0)
  status      ProjectStatus @default(DRAFT)
  featured    Boolean  @default(false)
  
  skills      ProjectSkill[]

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model SkillCategory {
  id        String   @id @default(uuid())
  name      String
  skills    Skill[]
  createdAt DateTime @default(now())
}

model Skill {
  id          String   @id @default(uuid())
  name        String
  svgContent  String?  @db.Text
  sortOrder   Int      @default(0)
  
  categoryId  String
  category    SkillCategory @relation(fields: [categoryId], references: [id])
  
  projects    ProjectSkill[]

  createdAt   DateTime @default(now())
}

model ProjectSkill {
  projectId String
  project   Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
  
  skillId   String
  skill     Skill   @relation(fields: [skillId], references: [id], onDelete: Cascade)

  @@id([projectId, skillId])
}

model Experience {
  id          String   @id @default(uuid())
  role        String
  company     String
  startDate   DateTime
  endDate     DateTime?
  isCurrent   Boolean  @default(false)
  description String   @db.Text
  sortOrder   Int      @default(0)
  createdAt   DateTime @default(now())
}

model Education {
  id          String   @id @default(uuid())
  degree      String
  institution String
  startYear   Int
  endYear     Int?
  description String   @db.Text
  sortOrder   Int      @default(0)
  createdAt   DateTime @default(now())
}

model Certification {
  id            String   @id @default(uuid())
  name          String
  issuer        String
  year          Int
  description   String   @db.Text
  credentialUrl String?
  sortOrder     Int      @default(0)
  createdAt     DateTime @default(now())
}

model Media {
  id        String   @id @default(uuid())
  fileName  String
  fileUrl   String
  mimeType  String
  size      Int
  createdAt DateTime @default(now())
}
